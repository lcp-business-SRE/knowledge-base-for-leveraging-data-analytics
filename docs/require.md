# データ分析基盤の非機能要求とサービス選定について

## 非機能要求

### 性能要求レベル

- 要求内容:
  - バッチ処理・リアルタイム処理の両方に対応できるシステムであること
  - 負荷に応じてスケールすること
  - 大量データの高速処理が可能であること

### セキュリティ要求

- 要求内容:
  - アクセス制御（認証・認可）の実装
    - カラムレベルのアクセス管理が理想
  - データ暗号化（保存時・転送時）
  - ログ管理・監査証跡の確保
  - 個人情報・機密情報の適切な管理
    - マスキング・もしくは情報量を削ぎ落とすなどができること

### ユーザビリティレベル（内部での運用）

- 要求内容:
  - 導入が容易であること
  - 今後の分析ワークフローにおいてリプレースの必要がない、もしくは容易に交換できるもの
  - 設定変更等が容易なこと

### ユーザビリティレベル（事業者）

- 要求内容:
  - 分析結果やダッシュボードが直感的に閲覧できること
  - 必要な指標やレポートにすぐアクセスできること
  - 操作がシンプルで、専門知識がなくても使いやすいこと
  - データの根拠や解釈が分かりやすく提示されること

### コスト

- 要求内容:
  - 導入・構築費用を最適化すること
  - 運用・保守費用を最小化すること
  - アップデートや障害対応が容易であること
  - 学習コストが小さいほうが望ましい

### 環境要求

- 要求内容:
  - 既存システム・サービスとの親和性（API連携、データ連携）

### 拡張性

- 要求内容:
  - 今後の開発において、技術的負債になりにくい
  - 新規機能追加や他システム連携の柔軟性
  - 外部連携が豊富
  - サービス自体が拡張される見込みがある

### 将来性

- 要求内容:
  - 技術トレンドへの追従性（新技術・新サービス対応）
  - クラウドにベンダーロックインされにくい
  - サービスやフォーマットがオープンである
  - バージョンアップや拡張時の影響範囲が限定的

### 汎用性

- 要求内容:
  - 多様なデータソース・分析手法への対応
  - QUICKTRIPの情報を分析する基盤にも転用が可能
  - 社内のデータに対応可能

### 機能性

- 要求内容:
  - 統計学習・機械学習・自然言語処理等の分析機能を将来的にサポート可能
  - 分析ワークフローの構築時に対応可能

### 保守サポート

- 要求内容:
  - 障害発生時の迅速な対応体制
  - サポート窓口・ドキュメントの充実
  - 定期的なメンテナンス・アップデートの実施
  - GDPR対応

## 採用サービス候補

### データ収集部

#### Amazon Data Firehose

- 用途
  - RDS内のデータのレプリケート手段
- 強み
  - RDSのCDC(Change Data Capture)からデータのレプリケートが可能で、リアルタイム処理やデータ連携の要求を満たす。
  - マネージドサービスなのでメンテが楽
  - 学習コストが低い(QUICKRIDEで使用経験あり)

#### Amazon Sagemaker Lakehouse

- 用途
  - DynamoDBのデータレプリケート
- 強み
  - マネージドサービスなのでメンテが楽
  - DynamoDBの情報をリアルタイムで連携できるので、分析が素早く行える
  - セキュリティやアクセス制御（IAM連携、暗号化、監査ログ）が充実しており、ガバナンス要件にも対応可能
    - LakeFormationと連携できる。
  - スケーラブルなアーキテクチャで、将来的なデータ量増加や機能拡張にも柔軟に対応できる
  - マルチユーザー・マルチテナント環境でも運用しやすく、運用コストや保守性にも優れる
  - 継続的なサービスアップデートがあり、将来性・拡張性が高い

### データレイク関連技術

#### AWS S3

- 用途: ストレージ
- 要求を満たす点: 大容量データの保存・取得が高速かつ安価で、耐障害性・可用性が高いため、スケーラビリティや高速処理の要求を満たす。

#### Apache Iceberg

- 用途: データレイクハウスのフォーマット
- 要求を満たす点: 大規模データのテーブル管理やスナップショット機能に優れ、データレイクのパフォーマンスと運用性を向上できるため、高速処理や運用性の要求に対応。

### データクエリ

#### Athena

- 用途: クエリエディタ
- 要求を満たす点: 容易にコンソールから操作可能で、SQLベースでのデータ抽出・分析ができるため、分析作業の効率化に寄与する。

### 権限管理

#### Amazon LakeFormation

- 用途: データへのアクセス権限設定
- 要求を満たす点: データレイクやDWH部分のきめ細かなアクセス制御が可能で、カラムレベルの権限制御や監査証跡の確保など、セキュリティ要求を満たす。

### 要検討課題

- 分析を本格的に行う際にはそのために様々なシステムが必要になる
